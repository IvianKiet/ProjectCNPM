<!DOCTYPE html>
<html class="dark" lang="vi">
<head>
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <title>Tr·ª£ l√Ω AI S2O - Chat</title>
    <script src="/assets/Javascript/api-config.js"></script>
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&display=swap" rel="stylesheet"/>
    
    <script id="tailwind-config">
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "primary": "#2bee7c",
                        "background-light": "#f6f8f7",
                        "background-dark": "#0a110d",
                        "chat-bubble": "#1a2e22",
                    },
                    fontFamily: {
                        "display": ["Plus Jakarta Sans", "sans-serif"]
                    },
                },
            },
        }
    </script>
    
    <style>
        .material-symbols-outlined {
            font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 24;
        }
        ::-webkit-scrollbar {
            display: none;
        }
        body {
            background-color: #050a07;
            min-height: 100dvh;
        }
        .ai-glow-bg {
            background: radial-gradient(circle at 50% 50%, rgba(43, 238, 124, 0.08) 0%, rgba(0, 0, 0, 0) 70%);
        }
        .ai-message-gradient {
            background: linear-gradient(135deg, rgba(43, 238, 124, 0.1) 0%, rgba(59, 130, 246, 0.1) 100%);
        }
        #chatMessages {
            scroll-behavior: smooth;
        }
    </style>
</head>

<body class="font-display text-gray-900 dark:text-white min-h-screen">
    <div class="max-w-[480px] mx-auto min-h-screen bg-background-light dark:bg-background-dark relative shadow-2xl border-x border-white/5 flex flex-col">
        
        <!-- Background Glow -->
        <div class="absolute inset-0 ai-glow-bg pointer-events-none"></div>
        
        <!-- Header -->
        <header class="sticky top-0 z-50 bg-background-light/80 dark:bg-background-dark/80 backdrop-blur-md px-4 py-4 flex items-center gap-4 border-b border-white/5">
            <button onclick="goBack()" class="size-10 flex items-center justify-center rounded-full bg-white/10 dark:bg-white/5 hover:bg-white/20 dark:hover:bg-white/10 transition-colors">
                <span class="material-symbols-outlined text-gray-900 dark:text-white">chevron_left</span>
            </button>
            <div class="flex flex-col flex-1">
                <h1 class="text-base font-bold" id="branchName">Tr·ª£ l√Ω AI Th√¥ng Minh</h1>
                <div class="flex items-center gap-1.5">
                    <span class="relative flex h-2 w-2">
                        <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-primary opacity-75"></span>
                        <span class="relative inline-flex rounded-full h-2 w-2 bg-primary"></span>
                    </span>
                    <span class="text-[10px] text-primary font-bold uppercase tracking-widest">ƒêang tr·ª±c tuy·∫øn</span>
                </div>
            </div>
            <!-- Clear History Button -->
            <button onclick="clearChatHistory()" class="size-10 flex items-center justify-center rounded-full bg-white/10 dark:bg-white/5 hover:bg-white/20 dark:hover:bg-white/10 transition-colors" title="X√≥a l·ªãch s·ª≠ chat">
                <span class="material-symbols-outlined text-gray-900 dark:text-white text-xl">delete_sweep</span>
            </button>
        </header>

        <!-- Chat Messages Container -->
        <main id="chatMessages" class="flex-1 px-4 py-6 overflow-y-auto space-y-6 z-10">
            
            <!-- AI Welcome Message -->
            <div class="flex gap-3 max-w-[85%]">
                <div class="size-8 rounded-full bg-gradient-to-br from-green-400 to-blue-500 flex items-center justify-center text-white shrink-0 shadow-lg shadow-green-500/20">
                    <span class="material-symbols-outlined text-sm" style="font-variation-settings: 'FILL' 1">smart_toy</span>
                </div>
                <div class="space-y-2">
                    <div class="bg-chat-bubble ai-message-gradient border border-primary/20 p-4 rounded-2xl rounded-tl-none text-sm leading-relaxed text-gray-200 shadow-sm">
                        Ch√†o b·∫°n! üëã T√¥i c√≥ th·ªÉ gi√∫p g√¨ cho b·∫°n h√¥m nay?<br><br>
                        H√£y h·ªèi t√¥i v·ªÅ:<br>
                        ‚Ä¢ üìã Menu v√† m√≥n ƒÉn<br>
                        ‚Ä¢ ‚è∞ Gi·ªù m·ªü c·ª≠a<br>
                        ‚Ä¢ üìç ƒê·ªãa ch·ªâ v√† ch·ªâ ƒë∆∞·ªùng<br>
                        ‚Ä¢ üí∞ Gi√° c·∫£ v√† khuy·∫øn m√£i<br>
                        ‚Ä¢ ü™ë ƒê·∫∑t b√†n<br>
                        ‚Ä¢ üí≥ Thanh to√°n
                    </div>
                    <span class="text-[10px] text-gray-500 font-medium px-1" id="welcomeTime"></span>
                </div>
            </div>

            <!-- Suggestion Buttons -->
            <div class="space-y-3 pt-2">
                <p class="text-[11px] font-bold text-gray-500 dark:text-gray-400 uppercase tracking-widest flex items-center gap-2">
                    <span class="material-symbols-outlined text-sm">tips_and_updates</span>
                    G·ª£i √Ω c√¢u h·ªèi
                </p>
                <div class="flex flex-wrap gap-2">
                    <button onclick="askQuestion('Nh√† h√†ng m·ªü c·ª≠a l√∫c m·∫•y gi·ªù?')" class="px-4 py-2.5 rounded-full bg-white dark:bg-white/5 border border-white/10 text-xs font-semibold text-gray-700 dark:text-gray-300 hover:border-primary/50 hover:bg-primary/5 transition-all text-left">
                        ‚è∞ Gi·ªù m·ªü c·ª≠a?
                    </button>
                    <button onclick="askQuestion('C√≥ m√≥n n√†o ƒëang gi·∫£m gi√° kh√¥ng?')" class="px-4 py-2.5 rounded-full bg-white dark:bg-white/5 border border-white/10 text-xs font-semibold text-gray-700 dark:text-gray-300 hover:border-primary/50 hover:bg-primary/5 transition-all text-left">
                        üî• M√≥n gi·∫£m gi√°?
                    </button>
                    <button onclick="askQuestion('Nh√† h√†ng ·ªü ƒë√¢u? Ch·ªâ ƒë∆∞·ªùng gi√∫p t√¥i')" class="px-4 py-2.5 rounded-full bg-white dark:bg-white/5 border border-white/10 text-xs font-semibold text-gray-700 dark:text-gray-300 hover:border-primary/50 hover:bg-primary/5 transition-all text-left">
                        üìç ƒê·ªãa ch·ªâ & ch·ªâ ƒë∆∞·ªùng
                    </button>
                    <button onclick="askQuestion('G·ª£i √Ω m√≥n ƒÉn ngon cho t√¥i')" class="px-4 py-2.5 rounded-full bg-white dark:bg-white/5 border border-white/10 text-xs font-semibold text-gray-700 dark:text-gray-300 hover:border-primary/50 hover:bg-primary/5 transition-all text-left">
                        üçΩÔ∏è G·ª£i √Ω m√≥n ƒÉn
                    </button>
                    <button onclick="askQuestion('T√¥i c√≥ th·ªÉ ƒë·∫∑t b√†n ƒë∆∞·ª£c kh√¥ng?')" class="px-4 py-2.5 rounded-full bg-white dark:bg-white/5 border border-white/10 text-xs font-semibold text-gray-700 dark:text-gray-300 hover:border-primary/50 hover:bg-primary/5 transition-all text-left">
                        ü™ë ƒê·∫∑t b√†n
                    </button>
                    <button onclick="askQuestion('Cho t√¥i xem to√†n b·ªô th·ª±c ƒë∆°n')" class="px-4 py-2.5 rounded-full bg-white dark:bg-white/5 border border-white/10 text-xs font-semibold text-gray-700 dark:text-gray-300 hover:border-primary/50 hover:bg-primary/5 transition-all text-left">
                        üìã Xem menu
                    </button>
                </div>
            </div>
        </main>

        <!-- Input Area -->
        <div class="p-4 bg-background-light dark:bg-background-dark/80 backdrop-blur-xl border-t border-white/5 z-20">
            <div class="flex items-center gap-2 bg-white dark:bg-[#1a2e22] p-2 rounded-2xl border border-white/10 shadow-lg">
                <input 
                    id="messageInput" 
                    class="flex-1 bg-transparent border-none focus:ring-0 text-sm py-2 placeholder:text-gray-500 dark:text-white" 
                    placeholder="Nh·∫≠p tin nh·∫Øn..." 
                    type="text"
                    onkeypress="handleKeyPress(event)"
                    autocomplete="off"
                />
                <button 
                    id="sendButton"
                    onclick="sendMessage()" 
                    class="size-10 bg-primary text-black rounded-xl flex items-center justify-center shadow-lg shadow-primary/20 hover:scale-95 transition-transform disabled:opacity-50 disabled:cursor-not-allowed">
                    <span class="material-symbols-outlined font-bold">send</span>
                </button>
            </div>
            <p class="text-[10px] text-gray-500 dark:text-gray-400 text-center mt-2">
                AI c√≥ th·ªÉ sai. Vui l√≤ng ki·ªÉm tra th√¥ng tin quan tr·ªçng.
            </p>
        </div>
    </div>

    <!-- Load the enhanced JavaScript -->
    <script src="../../assets/Javascript/ai/ai_chat.js"></script>
</body>
</html>