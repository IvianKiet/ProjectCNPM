<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Scan&Order - Đăng Ký Hệ thống</title>
<script src="https://cdn.tailwindcss.com?plugins=forms,typography"></script>
<link href="https://fonts.googleapis.com" rel="preconnect"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;600;700&family=Montserrat:wght@300;400;500;600&display=swap" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/icon?family=Material+Icons+Outlined" rel="stylesheet"/>
<script>
tailwind.config = {
    darkMode: "class",
    theme: {
        extend: {
            colors: {
                primary: "#6A8D55",
                secondary: "#D4A373",
                "background-light": "#F9F8F6",
                "background-dark": "#1A1A1A",
                "surface-light": "#FFFFFF",
                "surface-dark": "#262626",
                "text-light": "#2D3748",
                "text-dark": "#E2E8F0",
            },
            fontFamily: {
                display: ["'Cormorant Garamond'", "serif"],
                body: ["'Montserrat'", "sans-serif"],
            },
        },
    },
};
</script>
<style>
.glass-card {
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
}
.input-transition {
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}
@keyframes glow {
    0% { box-shadow: 0 0 5px rgba(106, 141, 85, 0.1); }
    50% { box-shadow: 0 0 20px rgba(106, 141, 85, 0.3); }
    100% { box-shadow: 0 0 5px rgba(106, 141, 85, 0.1); }
}
.luxury-btn:hover {
    animation: glow 2s infinite;
}
.modal {
    display: none;
    position: fixed;
    z-index: 9999;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0,0,0,0.5);
    align-items: center;
    justify-content: center;
}
.modal.show {
    display: flex;
}
.modal-content {
    background: white;
    padding: 2rem;
    border-radius: 1rem;
    text-align: center;
    max-width: 400px;
}
.icon-success {
    width: 60px;
    height: 60px;
    margin: 0 auto 1rem;
    background: #10b981;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
}
.icon-success svg {
    width: 32px;
    height: 32px;
    fill: white;
}
.btn-ok {
    background: #6A8D55;
    color: white;
    padding: 0.75rem 2rem;
    border-radius: 0.5rem;
    border: none;
    cursor: pointer;
    margin-top: 1rem;
}
.btn-ok:hover {
    background: #5a7d45;
}
</style>
</head>
<body class="font-body bg-background-light dark:bg-background-dark text-text-light dark:text-text-dark min-h-screen flex items-center justify-center relative overflow-hidden transition-colors duration-300">

<div class="absolute inset-0 z-0">
<img alt="Luxury Restaurant Interior Background" class="w-full h-full object-cover opacity-100 dark:opacity-60 transition-opacity duration-500" src="https://lh3.googleusercontent.com/aida-public/AB6AXuCTckdcDx6WF9mH8bMOEAKN04mU8EUSOcZDXeomsVJVsW62MhxI1gBRBHfq5ZG3XfX40kxcd5xHh-lKbgOymVifBkY6zYAP0jlpwvtkkd5r0bfIwYYcczBYtRv2CbqnyXxtNDMN6gFY1HAjyUxZOXPiOhLurjl6VmWOrg3n1OaUpD9BVjm-93AAPl7ChHerVSGfOKMB2N8r7SkPCBKDFMzArWWEkbMDngC_mxRWQ5no7_6ObKf2QDBrm-UZ4IiVk-N6FCxldRidN00"/>
<div class="absolute inset-0 bg-gradient-to-r from-black/80 via-black/40 to-transparent dark:from-black/90 dark:via-black/70 dark:to-black/30"></div>
</div>

<div class="relative z-10 w-full max-w-6xl mx-auto px-4 grid grid-cols-1 lg:grid-cols-12 gap-12 items-center h-full py-8">
<div class="hidden lg:block lg:col-span-7 text-white space-y-8 pr-12">
<h1 class="font-display text-6xl xl:text-7xl font-bold leading-tight drop-shadow-lg tracking-wide">
    Trải nghiệm <br/>
    <span class="text-secondary italic">Đẳng cấp</span> Quản lý
</h1>
<p class="text-lg text-gray-200 max-w-lg font-light tracking-wide leading-relaxed border-l-2 border-primary pl-6">
    Hệ thống quản lý nhà hàng toàn diện, mang đến sự tinh tế trong từng điểm chạm dịch vụ. Đăng ký ngay để bắt đầu hành trình nâng tầm thương hiệu.
</p>
</div>

<div class="lg:col-span-5 w-full max-w-md mx-auto lg:mx-0">
<div class="bg-surface-light/90 dark:bg-surface-dark/90 glass-card p-10 rounded-2xl shadow-2xl border border-white/20 dark:border-white/10 relative overflow-hidden">
<div class="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-primary to-transparent"></div>
<div class="text-center mb-8">
<div class="inline-flex items-center justify-center w-14 h-14 rounded-full bg-primary/10 mb-4 border border-primary/20">
<span class="material-icons-outlined text-primary text-2xl">person_add</span>
</div>
<h2 class="font-display text-3xl font-bold text-gray-900 dark:text-white tracking-wider">
    Đăng Ký Tài Khoản
</h2>
<p class="text-xs text-gray-500 dark:text-gray-400 mt-2 uppercase tracking-[0.1em]">Tham gia hệ thống quản lý</p>
</div>

<form id="from_login" action="#" class="space-y-4" method="POST">
<div class="space-y-1 group">
<label class="text-xs font-medium text-gray-600 dark:text-gray-300 ml-1 block group-focus-within:text-primary transition-colors" for="fullname">Họ và Tên</label>
<div class="relative">
<div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
<span class="material-icons-outlined text-gray-400 group-focus-within:text-primary transition-colors text-lg">badge</span>
</div>
<input class="block w-full pl-10 pr-3 py-2.5 border border-gray-200 dark:border-gray-600 rounded-lg leading-5 bg-white dark:bg-gray-800 text-gray-900 dark:text-white placeholder-gray-400 focus:outline-none focus:ring-1 focus:ring-primary focus:border-primary sm:text-sm input-transition shadow-sm" id="full_name" name="fullname" placeholder="Họ và tên" type="text"/>
<span id="message_fullname" class="text-red-500 text-xs ml-1 block mt-1"></span>
</div>
</div>

<div class="space-y-1 group">
<label class="text-xs font-medium text-gray-600 dark:text-gray-300 ml-1 block group-focus-within:text-primary transition-colors" for="email">Địa chỉ Email</label>
<div class="relative">
<div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
<span class="material-icons-outlined text-gray-400 group-focus-within:text-primary transition-colors text-lg">email</span>
</div>
<input class="block w-full pl-10 pr-3 py-2.5 border border-gray-200 dark:border-gray-600 rounded-lg leading-5 bg-white dark:bg-gray-800 text-gray-900 dark:text-white placeholder-gray-400 focus:outline-none focus:ring-1 focus:ring-primary focus:border-primary sm:text-sm input-transition shadow-sm" id="email" name="email" placeholder="email@nhahang.com" type="email"/>
<span id="message_username" class="text-red-500 text-xs ml-1 block mt-1"></span>
</div>
</div>

<div class="space-y-1 group">
<label class="text-xs font-medium text-gray-600 dark:text-gray-300 ml-1 block group-focus-within:text-primary transition-colors" for="password">Mật khẩu</label>
<div class="relative">
<div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
<span class="material-icons-outlined text-gray-400 group-focus-within:text-primary transition-colors text-lg">lock_outline</span>
</div>
<input class="block w-full pl-10 pr-3 py-2.5 border border-gray-200 dark:border-gray-600 rounded-lg leading-5 bg-white dark:bg-gray-800 text-gray-900 dark:text-white placeholder-gray-400 focus:outline-none focus:ring-1 focus:ring-primary focus:border-primary sm:text-sm input-transition shadow-sm" id="password" name="password" placeholder="*********" type="password"/>
<span id="meassage_password" class="text-red-500 text-xs ml-1 block mt-1"></span>
</div>
</div>

<div class="space-y-1 group">
<label class="text-xs font-medium text-gray-600 dark:text-gray-300 ml-1 block group-focus-within:text-primary transition-colors" for="confirm_password">Xác nhận Mật khẩu</label>
<div class="relative">
<div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
<span class="material-icons-outlined text-gray-400 group-focus-within:text-primary transition-colors text-lg">lock_reset</span>
</div>
<input class="block w-full pl-10 pr-3 py-2.5 border border-gray-200 dark:border-gray-600 rounded-lg leading-5 bg-white dark:bg-gray-800 text-gray-900 dark:text-white placeholder-gray-400 focus:outline-none focus:ring-1 focus:ring-primary focus:border-primary sm:text-sm input-transition shadow-sm" id="confirm_password" name="confirm_password" placeholder="*********" type="password"/>
<span id="meassage_password_confirm" class="text-red-500 text-xs ml-1 block mt-1"></span>
</div>
</div>

<div class="pt-2">
<button class="luxury-btn w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-md text-sm font-semibold text-white bg-primary hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary transition-all duration-300 uppercase tracking-widest" type="submit" id="btn_register">
    Đăng Ký
</button>
</div>
</form>

<div class="mt-6 text-center">
<p class="text-xs text-gray-500 dark:text-gray-400">
    Đã có tài khoản? <a class="text-gray-700 dark:text-gray-200 font-medium underline decoration-primary decoration-2 underline-offset-4 hover:text-primary transition-colors" href="../../index.html">Đăng nhập ngay</a>
</p>
</div>
</div>
</div>
</div>

<button class="fixed bottom-6 right-6 z-50 p-3 rounded-full bg-surface-light dark:bg-surface-dark text-gray-600 dark:text-gray-300 shadow-lg border border-gray-200 dark:border-gray-700 hover:text-primary dark:hover:text-primary transition-colors" id="theme_toggle">
<span class="material-icons-outlined block dark:hidden">dark_mode</span>
<span class="material-icons-outlined hidden dark:block">light_mode</span>
</button>

<div id="register_notifaction" class="modal">
  <div class="modal-content">
    <div class="icon-success">
      <svg viewBox="0 0 24 24">
        <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
      </svg>
    </div>
    <h2>Đăng ký thành công!</h2>
    <p>Bạn có thể đănh nhập để bắt đầu sử dụng hệ thống.</p>
    <button class="btn-ok" id="close_modal">OK</button>
  </div>
</div>

<script>
// API Configuration
const API_CONFIG = {
    BASE_URL: "http://localhost:8000/api",
    TIMEOUT: 10000,
};

async function apiCall(endpoint, options = {}) {
    const url = `${API_CONFIG.BASE_URL}${endpoint}`;
    const defaultOptions = {
        headers: { 'Content-Type': 'application/json' },
        timeout: API_CONFIG.TIMEOUT,
    };
    const config = { ...defaultOptions, ...options };
    
    try {
        const response = await fetch(url, config);
        if (response.status === 204) return { success: true };
        const data = await response.json();
        if (!response.ok) throw new Error(data.detail || 'API request failed');
        return data;
    } catch (error) {
        console.error(`API Error (${endpoint}):`, error);
        throw error;
    }
}

const AuthAPI = {
    async register(fullName, email, password) {
        return apiCall('/auth/register', {
            method: 'POST',
            body: JSON.stringify({
                full_name: fullName,
                email: email,
                password: password
            })
        });
    }
};

// Theme Toggle
let currentTheme = 'light';
const html = document.documentElement;
const btn_toggle = document.getElementById("theme_toggle");

btn_toggle.addEventListener("click", () => {
    html.classList.toggle("dark");
    currentTheme = html.classList.contains("dark") ? "dark" : "light";
});

// Register Form
const registerButton = document.getElementById("btn_register");
const registerNotification = document.getElementById("register_notifaction");
const closeModalBtn = document.getElementById("close_modal");

registerButton.addEventListener("click", async (e) => {
    e.preventDefault();
    
    const fullName = document.getElementById("full_name").value;
    const email = document.getElementById("email").value;
    const password = document.getElementById("password").value;
    const confirmPassword = document.getElementById("confirm_password").value;
    
    // Clear previous errors
    document.getElementById("message_fullname").textContent = "";
    document.getElementById("message_username").textContent = "";
    document.getElementById("meassage_password").textContent = "";
    document.getElementById("meassage_password_confirm").textContent = "";
    
    let isSuccess = true;
    
    // Validate full name
    const name_error = /[^a-zA-ZÀ-ỹ\s]/;
    if (fullName === "" || name_error.test(fullName)) {
        document.getElementById("message_fullname").textContent = "Tên không hợp lệ";
        isSuccess = false;
    }
    
    // Validate email
    const email_regex = /^[a-zA-Z0-9]+@gmail\.com$/;
    if (!email_regex.test(email)) {
        document.getElementById("message_username").textContent = "Email không hợp lệ";
        isSuccess = false;
    }
    
    // Validate password
    const password_regex = /(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])/;
    if (password.length < 8 || !password_regex.test(password)) {
        document.getElementById("meassage_password").textContent = "Mật khẩu không đủ mạnh";
        isSuccess = false;
    }
    
    // Validate confirm password
    if (password !== confirmPassword) {
        document.getElementById("meassage_password_confirm").textContent = "Mật khẩu không khớp";
        isSuccess = false;
    }
    
    if (!isSuccess) return;
    
    try {
        const data = await AuthAPI.register(fullName, email, password);
        
        // Show success notification
        registerNotification.classList.add("show");
        
        // Clear form
        document.getElementById("full_name").value = "";
        document.getElementById("email").value = "";
        document.getElementById("password").value = "";
        document.getElementById("confirm_password").value = "";
        
    } catch (error) {
        alert("Đăng ký thất bại: " + error.message);
        console.error("Registration error:", error);
    }
});

closeModalBtn.addEventListener("click", () => {
    registerNotification.classList.remove("show");
    window.location.href = "../../index.html";
});
</script>

</body>
</html>